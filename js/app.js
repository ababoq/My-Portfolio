//Header fixed
const projects = [
    {
        title: "Prédicteur Avancé de Résultats de Football",
        description: "Un prédicteur de résultats de football basé sur l'apprentissage automatique. Il utilise des algorithmes de régression logistique pour prédire les résultats des matchs de football. Il a été formé sur des données historiques de matchs de football pour prédire les résultats futurs.",
        technologies: ["Python", "Web Scraping", "TensorFlow", "Machine Learning", "Deep Learning"],
        images: [
            { type: "image", src: "./img/portfolio/Bettor/iamge.png", title: "" },
            { type: "image", src: "./img/portfolio/Bettor/bet1.png", title: "" },
            { type: "image", src: "./img/portfolio/Bettor/bet2.png", title: "" },
            { type: "image", src: "./img/portfolio/Bettor/bet3.png", title: "" },
            { type: "image", src: "./img/portfolio/Bettor/bet4.png", title: "" },
            { type: "image", src: "./img/portfolio/Bettor/bet5.png", title: "" },
            { type: "image", src: "./img/portfolio/Bettor/bet6.png", title: "" },
            { type: "image", src: "./img/portfolio/Bettor/bet7.png", title: "" },
            { type: "image", src: "./img/portfolio/Bettor/bet8.png", title: "" },
            { type: "video", src: "./img/portfolio/Bettor/demo.mp4", title: "" }

        ],
        additionalText: "",
    },

    {
        title: "Une Application Web d’Extraction de Données",
        description: "Une application robuste qui utilise l’IA pour détecter des structures de table à partir d’images et de fichiers PDF fournis par les utilisateurs, extrayant les donn ́ees de ces tables vers des fichiers CSV.",
        technologies: ["Python", "Detectron2", "OpenCV", "PaddleOCR", "Flask"],

        images: [
            { type: "image", src: "./img/portfolio/ocr/extract.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/imageweb.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/imageupload.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/imageprocess.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/imageoutput.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/image.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/image2.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/image3.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/image4.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/image5.png", title: "" },
            { type: "image", src: "./img/portfolio/ocr/image6.png", title: "" },
            { type: "video", src: "./img/portfolio/ocr/demo.mp4", title: "" },



        ],
        additionalText: ""
    },
    {
        title: "Application Web de Planification d’Itinéraire Urbain",
        description: "Conception et développement d’une application robuste de calcul d’itinéraire en milieu urbain. Mise en œuvre d’algorithmes de plus court chemin tels que Dijkstra et A star.",
        technologies: ["Java", "Docker", "Gradle", "Spring", "JUnit", "CI/CD"],
        images: [
            { type: "image", src: "./img/portfolio/map/image.png", title: "" },
            { type: "image", src: "./img/portfolio/map/image2.png", title: "" },
            { type: "image", src: "./img/portfolio/map/image3.png", title: "" },
            { type: "image", src: "./img/portfolio/map/image4.png", title: "" },
            { type: "video", src: "./img/portfolio/map/demo.mp4", title: "" },



        ],
        additionalText: ""
    },
    {
        title: "",
        description: "",
        technologies: "",
        images: [
            { type: "image", src: "./img/portfolio/lamp/image.png", title: "" },
            { type: "image", src: "./img/portfolio/lamp/image1.png", title: "" },
            { type: "image", src: "./img/portfolio/lamp/image2.png", title: "" },
            { type: "image", src: "./img/portfolio/lamp/image3.png", title: "" },
            { type: "image", src: "./img/portfolio/lamp/image4.png", title: "" },
            { type: "video", src: "./img/portfolio/lamp/demo.mp4", title: "" },


        ],
        additionalText: ""
    },
    {
        title: "Boutique Automatisée pour Recharges et Achats en Crypto",
        description: "un canal Telegram destiné à vendre des produits de manière autonome en créant un bot intelligent spécialement conçu pour cela. L'objectif était de simplifier l'expérience d'achat pour les utilisateurs tout en stimulant les ventes. À terme, le bot a contribué à augmenter les ventes de produits sans complications",
        technologies: "",
        images: [
            { type: "image", src: "./img/portfolio/telegram/image.png", title: "" },
            { type: "image", src: "./img/portfolio/telegram/image1.png", title: "" },
            { type: "image", src: "./img/portfolio/telegram/image2.png", title: "" },
            { type: "image", src: "./img/portfolio/telegram/image3.png", title: "" },
            { type: "image", src: "./img/portfolio/telegram/image4.png", title: "" },
            { type: "image", src: "./img/portfolio/telegram/image5.png", title: "" },
            { type: "image", src: "./img/portfolio/telegram/image6.png", title: "" },
            { type: "image", src: "./img/portfolio/telegram/image7.png", title: "" },
            { type: "video", src: "./img/portfolio/telegram/demo.mp4", title: "" },


        ],
        additionalText: ""
    },
    {
        title: "Un outil pédagogique innovant pour la gestion de graphes",
        description: "Outil interactif pour visualiser et comprendre les structures de données et les algorithmes grˆace à des animations",
        technologies: ["Python", "QML", "JavaScript", "Matplotlib"],
        images: [
            { type: "image", src: "./img/portfolio/graphy/image.png", title: "" },
            { type: "image", src: "./img/portfolio/graphy/image2.png", title: "" },
            { type: "image", src: "./img/portfolio/graphy/image3.png", title: "" },
            { type: "image", src: "./img/portfolio/graphy/image4.png", title: "" },
            { type: "image", src: "./img/portfolio/graphy/image5.png", title: "" },
            { type: "image", src: "./img/portfolio/graphy/image6.png", title: "" },
            { type: "video", src: "./img/portfolio/graphy/demo.mp4", title: "" },


        ],
        additionalText: ""
    },
    {
        title: "",
        description: "",
        technologies: "",
        images: [
            { type: "image", src: "./img/portfolio/health/health.png", title: "" },
            { type: "image", src: "./img/portfolio/health/image.png", title: "" },
            { type: "image", src: "./img/portfolio/health/image2.png", title: "" },
            { type: "image", src: "./img/portfolio/health/image3.png", title: "" },
            { type: "image", src: "./img/portfolio/health/image4.png", title: "" },
            { type: "image", src: "./img/portfolio/health/image5.png", title: "" },
            { type: "image", src: "./img/portfolio/health/image6.png", title: "" },
            { type: "video", src: "./img/portfolio/health/demo.mp4", title: "" },


        ],
        additionalText: ""
    },
    {
        title: "",
        description: "",
        technologies: "",
        images: [
            { type: "image", src: "./img/portfolio/estm/image.png", title: "" },
            { type: "image", src: "./img/portfolio/estm/adminabsent.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/adminconge.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/adminemployer.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/adminnews.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/adminsanction.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/adminsettings.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/darkmodeuser.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/darkmode.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/useractu.PNG", title: "" },
            { type: "image", src: "./img/portfolio/estm/userinfos.PNG", title: "" },
            { type: "video", src: "./img/portfolio/estm/demo.mp4", title: "" },


        ],
        additionalText: ""
    },
    {
        title: "",
        description: "",
        technologies: "",
        images: [
            { type: "image", src: "./img/portfolio/sofascrap/image.png", title: "" },
            { type: "image", src: "./img/portfolio/sofascrap/image1.png", title: "" },
            { type: "image", src: "./img/portfolio/sofascrap/image2.png", title: "" },
            { type: "image", src: "./img/portfolio/sofascrap/image3.png", title: "" },
            { type: "image", src: "./img/portfolio/sofascrap/image4.png", title: "" },
            { type: "video", src: "./img/portfolio/sofascrap/demo.mp4", title: "" },


        ],
        additionalText: ""
    },


];

window.onscroll = function () {
    const docScrollTop = document.documentElement.scrollTop;

    if (window.innerWidth > 991) {
        if (docScrollTop > 100) {
            document.querySelector("header").classList.add("fixed");
        } else {
            document.querySelector("header").classList.remove("fixed");
        }
    }
}




//navbar links

const navbar = document.querySelector(".navbar");
a = navbar.querySelectorAll("a")

a.forEach(function (element) {
    element.addEventListener("click", function () {
        for (let i = 0; i < a.length; i++) {
            a[i].classList.remove("active")
        }
        this.classList.add("active");
        document.querySelector(".navbar").classList.toggle("show");
    })
})


//Hamburger

const hamBurger = document.querySelector(".hamburger");

hamBurger.addEventListener("click", function () {
    document.querySelector(".navbar").classList.toggle("show");
})

//Portfolio Gallery
const galleryItem = document.querySelectorAll(".item"); // Define it here

const lightbox = document.querySelector(".lightbox");
const lightboxImg = lightbox.querySelector("img");
galleryItem.forEach(function (element, index) {
    element.querySelector(".fa-plus").addEventListener("click", function () {
        let project = projects[index]; // Get the project from the array

        let mediaContainer = document.getElementById("imageContainer");
        mediaContainer.innerHTML = ""; // Clear previous media

        // Project Title
        let projectTitle = document.createElement("h2");
        projectTitle.textContent = project.title;
        projectTitle.className = "projectTitle";
        mediaContainer.appendChild(projectTitle);

        // Project Description
        let projectDescription = document.createElement("p");
        projectDescription.textContent = project.description;
        projectDescription.className = "projectDescription";
        mediaContainer.appendChild(projectDescription);

        // Technologies Used
        if (project.technologies && project.technologies.length > 0) {
            let technologiesUsed = document.createElement("p");
            technologiesUsed.textContent = "Technologies utilisées : " + project.technologies.join(", ");
            technologiesUsed.className = "technologiesUsed";
            mediaContainer.appendChild(technologiesUsed);
        }

        // Append media items
        project.images.forEach(media => {
            if (media.type === "image" || !media.type) {
                let img = document.createElement("img");
                img.src = media.src;
                img.alt = project.title;
                img.className = "projectImage"; // Use class for styling
                mediaContainer.appendChild(img);
            } else if (media.type === "video") {
                let video = document.createElement("video");
                video.src = media.src;
                video.controls = true;
                video.className = "projectVideo"; // Use class for styling
                mediaContainer.appendChild(video);
            }
        });

        document.getElementById("projectModal").style.display = "flex";
    });
});





let modal = document.getElementById("projectModal");
let closeBtn = modal.querySelector(".close");

closeBtn.onclick = function () {
    modal.style.display = "none";
}

window.onclick = function (event) {
    if (event.target == modal) {
        modal.style.display = "none";
    }
}


const sliderContainer = document.querySelector(".testimonials-box");
const slider = sliderContainer.children;
const containerWidth = sliderContainer.offsetWidth;

const margin = 30;
let itemPerSlide = 0;
let sliderDot;

const responsive = [{
    breakPoint: {
        width: 0,
        item: 1,
    },
},
{
    breakPoint: {
        width: 991,
        item: 2,
    },
},
];

function load() {
    for (let i = 0; i < responsive.length; i++) {
        if (window.innerWidth > responsive[i].breakPoint.width) {
            itemPerSlide = responsive[i].breakPoint.item;
        }
    }
    start();
}

function start() {
    totalWidth = 0;
    for (let i = 0; i < slider.length; i++) {
        slider[i].style.width = containerWidth / itemPerSlide - margin + "px";
        slider[i].style.margin = margin / 2 + "px";
        totalWidth += containerWidth / itemPerSlide;
    }
    sliderContainer.style.width = totalWidth + "px";

    sliderDot = Math.ceil(slider.length / itemPerSlide);

    for (let i = 0; i < sliderDot; i++) {
        const div = document.createElement("div");
        div.id = i;
        div.setAttribute("onclick", "controlSlide(this)");
        if (i == 0) {
            div.classList.add("active");
        }
        document.querySelector(".slider").appendChild(div);
    }
}

let currentSlide = 0;
let autoSlide = 0;

function controlSlide(element) {
    clearInterval(timer);
    timer = setInterval(autoPlay, 5000);
    autoSlide = element.id;
    currentSlide = element.id;
    changeSlide(currentSlide);
}

function changeSlide(currentSlide) {
    controlButton = document.querySelector(".slider").children;
    for (let i = 0; i < controlButton.length; i++) {
        controlButton[i].classList.remove("active");
    }
    controlButton[currentSlide].classList.add("active");

    sliderContainer.style.marginLeft = -(containerWidth * currentSlide) + "px";
}

function autoPlay() {
    if (autoSlide == sliderDot - 1) {
        autoSlide = 0;
    } else {
        autoSlide++;
    }
    changeSlide(autoSlide);
}
let timer = setInterval(autoPlay, 5000);

window.onload = load();


//Footer Year 
var year = document.getElementById("year");
year.innerHTML = new Date().getFullYear();